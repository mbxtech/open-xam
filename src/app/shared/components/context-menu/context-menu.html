<div class="relative inline-block">
  <button #menuButton (click)="toggleMenu($event)" [disabled]="disabled()"
    class="p-2 rounded-md hover:bg-gray-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer"
    [attr.aria-expanded]="isOpen()" [attr.aria-label]="ariaLabel()" type="button">
    <fa-icon class="fas fa-ellipsis-v text-gray-600 text-lg" [icon]="faEllipsis"></fa-icon>
  </button>

  @if(isOpen()){
    <div class="absolute z-50 mt-1 w-56 rounded-lg shadow-lg bg-white dark:bg-neutral-900 ring-1 ring-black ring-opacity-5 focus:outline-none animate-fadeIn"
      [class.right-0]="position() === 'bottom-right'" [class.left-0]="position() === 'bottom-left'" role="menu"
      aria-orientation="vertical">
      <div class="py-1">
        @for (item of items(); track item; let i = $index) {
          @if (!item.divider) {
            <button (click)="handleItemClick(item)" [disabled]="item.disabled"
              class="w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-neutral-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-150 cursor-pointer rounded-md dark:text-white"
              [class.cursor-not-allowed]="item.disabled" role="menuitem" type="button">
              <fa-icon [icon]="item.icon" />
              <span class="ml-3">{{ item.label }}</span>
            </button>
          } @else {
            <div class="my-1 border-t border-gray-200" role="separator"></div>
          }
        }

        @if (!items().length) {
          <div class="px-4 py-3 text-sm text-gray-500 text-center" i18n="@@ox.contextMenu.noOptions">
            No options available
          </div>
        }
      </div>
    </div>
  }
</div>